<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lesson Plan Generator</title>
  <style>
    /* Basic CSS styling */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 1rem;
      background-color: #f4f4f4;
    }

    header {
      text-align: center;
      padding: 1rem 0;
      background-color: #00539C;
      color: white;
    }

    h2 {
      border-bottom: 2px solid #ccc;
      padding-bottom: 0.5rem;
    }

    section {
      background: white;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    form > div {
      margin-bottom: 1rem;
    }

    label {
      display: block;
      margin-bottom: 0.25rem;
      font-weight: bold;
    }

    input[type="text"],
    input[type="email"],
    select,
    textarea {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    button {
      padding: 0.5rem 1rem;
      background-color: #00539C;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #003f7f;
    }

    pre {
      background-color: #eee;
      padding: 1rem;
      overflow-x: auto;
      border-radius: 4px;
    }

    ul {
      list-style-type: none;
      padding-left: 0;
    }

    li {
      background: #eee;
      margin: 0.5rem 0;
      padding: 0.5rem;
      border-radius: 4px;
    }

    .status {
      margin-top: 0.5rem;
      font-style: italic;
    }
  </style>
</head>
<body>
  <header>
    <h1>Lesson Plan Generator</h1>
  </header>
  <main>
    <!-- Lesson Plan Generation Section -->
    <section id="lesson-generation">
      <h2>Generate Lesson Plan</h2>
      <form id="lessonForm">
        <div>
          <label for="ageGroup">Age Group:</label>
          <select id="ageGroup" name="ageGroup">
            <option value="preschool">Preschool</option>
            <option value="kindergarten">Kindergarten</option>
            <option value="elementary">Elementary</option>
          </select>
        </div>
        <div>
          <label for="activityType">Activity Type:</label>
          <select id="activityType" name="activityType">
            <option value="creative">Creative</option>
            <option value="academic">Academic</option>
            <option value="physical">Physical</option>
          </select>
        </div>
        <div>
          <label for="goal">Goal:</label>
          <input type="text" id="goal" name="goal" placeholder="Enter learning objective" required />
        </div>
        <button type="submit">Generate Lesson</button>
      </form>
      <div id="generatedLesson">
        <h3>Generated Lesson Plan</h3>
        <pre id="lessonOutput">Your generated lesson plan will appear here.</pre>
      </div>
    </section>

    <!-- Activity Library Section -->
    <section id="activity-library">
      <h2>Activity Library</h2>
      <form id="searchForm">
        <div>
          <label for="searchQuery">Search Lesson Plans:</label>
          <input type="text" id="searchQuery" name="searchQuery" placeholder="Search by title or keyword" required />
        </div>
        <button type="submit">Search</button>
      </form>
      <div id="libraryResults">
        <h3>Lesson Plans</h3>
        <ul id="lessonList">
          <!-- Lesson list items will be inserted here -->
        </ul>
      </div>
    </section>

    <!-- Customization Tool Section -->
    <section id="customization-tool">
      <h2>Customize Lesson Plan</h2>
      <textarea id="customLesson" rows="10" placeholder="Edit your lesson plan here..."></textarea>
      <button id="saveCustomLesson">Save Custom Lesson</button>
      <div id="saveStatus" class="status"></div>
    </section>

    <!-- Collaboration Tools Section -->
    <section id="collaboration-tools">
      <h2>Collaboration Tools</h2>
      <form id="shareForm">
        <div>
          <label for="shareEmail">Share Lesson with Email:</label>
          <input type="email" id="shareEmail" name="shareEmail" placeholder="Enter recipient's email" required />
        </div>
        <button type="submit">Share Lesson</button>
      </form>
      <div id="shareStatus" class="status"></div>
    </section>
  </main>

  <script>
    // --- Lesson Plan Generation ---
    document.getElementById('lessonForm').addEventListener('submit', async (event) => {
      event.preventDefault();

      // Retrieve values from the form
      const ageGroup = document.getElementById('ageGroup').value;
      const activityType = document.getElementById('activityType').value;
      const goal = document.getElementById('goal').value;

      const payload = { ageGroup, activityType, goal };

      try {
        // Replace with your Make.com webhook URL for lesson generation
        const response = await fetch('https://hook.make.com/your_generateLesson_webhook', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        if (!response.ok) {
          throw new Error('Network response was not ok');
        }

        const data = await response.json();
        const formattedLesson = JSON.stringify(data, null, 2);
        document.getElementById('lessonOutput').textContent = formattedLesson;
        // Optionally, load the customization editor with the generated lesson
        document.getElementById('customLesson').value = formattedLesson;
      } catch (error) {
        console.error('Error generating lesson plan:', error);
        document.getElementById('lessonOutput').textContent = 'Error generating lesson plan.';
      }
    });

    // --- Activity Library Search ---
    document.getElementById('searchForm').addEventListener('submit', async (event) => {
      event.preventDefault();

      const query = document.getElementById('searchQuery').value;

      try {
        // Replace with your Make.com webhook URL for activity library search
        const response = await fetch('https://hook.make.com/your_activityLibrary_webhook', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ query })
        });

        if (!response.ok) {
          throw new Error('Network response was not ok');
        }

        const lessons = await response.json();
        const lessonList = document.getElementById('lessonList');
        lessonList.innerHTML = '';

        // Expecting an array of lesson objects with at least 'title' and 'description'
        lessons.forEach((lesson) => {
          const li = document.createElement('li');
          li.textContent = lesson.title + ' - ' + lesson.description;
          lessonList.appendChild(li);
        });
      } catch (error) {
        console.error('Error fetching activity library:', error);
        document.getElementById('lessonList').innerHTML = '<li>Error fetching lesson plans.</li>';
      }
    });

    // --- Customization Tool (Save Custom Lesson) ---
    document.getElementById('saveCustomLesson').addEventListener('click', async () => {
      const customLesson = document.getElementById('customLesson').value;

      try {
        // Replace with your Make.com webhook URL for updating/saving the lesson plan
        const response = await fetch('https://hook.make.com/your_updateLesson_webhook', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ customLesson })
        });

        if (!response.ok) {
          throw new Error('Network response was not ok');
        }

        await response.json();
        document.getElementById('saveStatus').textContent = 'Custom lesson saved successfully.';
      } catch (error) {
        console.error('Error saving custom lesson plan:', error);
        document.getElementById('saveStatus').textContent = 'Error saving custom lesson plan.';
      }
    });

    // --- Collaboration Tool (Share Lesson Plan) ---
    document.getElementById('shareForm').addEventListener('submit', async (event) => {
      event.preventDefault();

      const email = document.getElementById('shareEmail').value;

      try {
        // Replace with your Make.com webhook URL for sharing the lesson plan
        const response = await fetch('https://hook.make.com/your_shareLesson_webhook', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email })
        });

        if (!response.ok) {
          throw new Error('Network response was not ok');
        }

        await response.json();
        document.getElementById('shareStatus').textContent = 'Lesson plan shared successfully.';
      } catch (error) {
        console.error('Error sharing lesson plan:', error);
        document.getElementById('shareStatus').textContent = 'Error sharing lesson plan.';
      }
    });
  </script>
</body>
</html>
